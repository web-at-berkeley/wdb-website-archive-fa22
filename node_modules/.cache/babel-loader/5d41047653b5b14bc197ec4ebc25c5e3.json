{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Particle_1 = require(\"./Particle\");\n\nvar InteractionManager_1 = require(\"./Particle/Interactions/Particles/InteractionManager\");\n\nvar Utils_1 = require(\"../Utils/Utils\");\n\nvar HoverMode_1 = require(\"../Enums/Modes/HoverMode\");\n\nvar Grabber_1 = require(\"./Particle/Interactions/Mouse/Grabber\");\n\nvar ClickMode_1 = require(\"../Enums/Modes/ClickMode\");\n\nvar Repulser_1 = require(\"./Particle/Interactions/Mouse/Repulser\");\n\nvar DivMode_1 = require(\"../Enums/Modes/DivMode\");\n\nvar Bubbler_1 = require(\"./Particle/Interactions/Mouse/Bubbler\");\n\nvar Connector_1 = require(\"./Particle/Interactions/Mouse/Connector\");\n\nvar QuadTree_1 = require(\"../Utils/QuadTree\");\n\nvar DestroyType_1 = require(\"../Enums/DestroyType\");\n\nvar Point_1 = require(\"../Utils/Point\");\n\nvar Rectangle_1 = require(\"../Utils/Rectangle\");\n\nvar Particles = function () {\n  function Particles(container) {\n    this.container = container;\n    this.array = [];\n    this.interactionsEnabled = false;\n    var canvasSize = this.container.canvas.size;\n    this.noiseZ = 0;\n    this.quadTree = new QuadTree_1.QuadTree(new Rectangle_1.Rectangle(0, 0, canvasSize.width, canvasSize.height), 4);\n  }\n\n  Object.defineProperty(Particles.prototype, \"count\", {\n    get: function () {\n      return this.array.length;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Particles.prototype.init = function () {\n    var container = this.container;\n    var options = container.options;\n    var handled = false;\n    this.noiseZ = 0;\n\n    for (var id in container.plugins) {\n      var plugin = container.plugins[id];\n\n      if (plugin.particlesInitialization !== undefined) {\n        handled = plugin.particlesInitialization();\n      }\n\n      if (handled) {\n        break;\n      }\n    }\n\n    if (!handled) {\n      for (var i = this.count; i < options.particles.number.value; i++) {\n        this.addParticle(new Particle_1.Particle(container));\n      }\n    }\n\n    this.interactionsEnabled = options.particles.lineLinked.enable || options.particles.move.attract.enable || options.particles.collisions.enable || options.infection.enable;\n\n    if (options.infection.enable) {\n      for (var i = 0; i < options.infection.infections; i++) {\n        var notInfected = this.array.filter(function (p) {\n          return p.infectionStage === undefined;\n        });\n        var infected = Utils_1.Utils.itemFromArray(notInfected);\n        infected.startInfection(0);\n      }\n    }\n  };\n\n  Particles.prototype.redraw = function () {\n    this.clear();\n    this.init();\n    this.draw(0);\n  };\n\n  Particles.prototype.removeAt = function (index, quantity) {\n    if (index >= 0 && index <= this.count) {\n      for (var _i = 0, _a = this.array.splice(index, quantity !== null && quantity !== void 0 ? quantity : 1); _i < _a.length; _i++) {\n        var particle = _a[_i];\n        particle.destroy();\n      }\n    }\n  };\n\n  Particles.prototype.remove = function (particle) {\n    this.removeAt(this.array.indexOf(particle));\n  };\n\n  Particles.prototype.update = function (delta) {\n    var container = this.container;\n    var options = container.options;\n    var particlesToDelete = [];\n\n    for (var i = 0; i < this.count; i++) {\n      var particle = this.array[i];\n      Bubbler_1.Bubbler.reset(particle);\n\n      for (var id in container.plugins) {\n        var plugin = container.plugins[id];\n\n        if (particle.destroyed) {\n          break;\n        }\n\n        if (plugin.particleUpdate) {\n          plugin.particleUpdate(particle, delta);\n        }\n      }\n\n      if (!particle.destroyed) {\n        var sizeOpt = particle.particlesOptions.size;\n        var sizeAnim = sizeOpt.animation;\n\n        if (sizeAnim.enable) {\n          switch (sizeAnim.destroy) {\n            case DestroyType_1.DestroyType.max:\n              if (particle.size.value >= sizeOpt.value * container.retina.pixelRatio) {\n                particle.destroyed = true;\n              }\n\n              break;\n\n            case DestroyType_1.DestroyType.min:\n              if (particle.size.value <= sizeAnim.minimumValue * container.retina.pixelRatio) {\n                particle.destroyed = true;\n              }\n\n              break;\n          }\n        }\n      }\n\n      if (particle.destroyed) {\n        particlesToDelete.push(particle);\n        continue;\n      }\n\n      particle.update(i, delta);\n      var pos = particle.getPosition();\n      container.particles.quadTree.insert(new Point_1.Point(pos.x, pos.y, particle));\n    }\n\n    for (var _i = 0, particlesToDelete_1 = particlesToDelete; _i < particlesToDelete_1.length; _i++) {\n      var particle = particlesToDelete_1[_i];\n      this.remove(particle);\n    }\n\n    if (container.options.interactivity.events.onDiv.enable || container.options.interactivity.events.onHover.enable && container.interactivity.mouse.position || container.options.interactivity.events.onClick.enable && container.interactivity.mouse.clickPosition) {\n      var hoverMode = options.interactivity.events.onHover.mode;\n      var clickMode = options.interactivity.events.onClick.mode;\n      var divMode = options.interactivity.events.onDiv.mode;\n\n      if (Utils_1.Utils.isInArray(HoverMode_1.HoverMode.grab, hoverMode)) {\n        Grabber_1.Grabber.grab(container, delta);\n      }\n\n      if (Utils_1.Utils.isInArray(HoverMode_1.HoverMode.repulse, hoverMode) || Utils_1.Utils.isInArray(ClickMode_1.ClickMode.repulse, clickMode) || Utils_1.Utils.isInArray(DivMode_1.DivMode.repulse, divMode)) {\n        Repulser_1.Repulser.repulse(container, delta);\n      }\n\n      if (Utils_1.Utils.isInArray(HoverMode_1.HoverMode.bubble, hoverMode) || Utils_1.Utils.isInArray(ClickMode_1.ClickMode.bubble, clickMode)) {\n        Bubbler_1.Bubbler.bubble(container, delta);\n      }\n\n      if (Utils_1.Utils.isInArray(HoverMode_1.HoverMode.connect, hoverMode)) {\n        Connector_1.Connector.connect(container, delta);\n      }\n    }\n\n    for (var _a = 0, _b = this.array; _a < _b.length; _a++) {\n      var particle = _b[_a];\n\n      if (this.interactionsEnabled) {\n        InteractionManager_1.InteractionManager.interact(particle, container, delta);\n      }\n    }\n  };\n\n  Particles.prototype.draw = function (delta) {\n    var container = this.container;\n    container.canvas.clear();\n    var canvasSize = this.container.canvas.size;\n    this.quadTree = new QuadTree_1.QuadTree(new Rectangle_1.Rectangle(0, 0, canvasSize.width, canvasSize.height), 4);\n    this.update(delta);\n    this.noiseZ += 0.0004;\n\n    for (var id in container.plugins) {\n      var plugin = container.plugins[id];\n      container.canvas.drawPlugin(plugin, delta);\n    }\n\n    for (var _i = 0, _a = this.array; _i < _a.length; _i++) {\n      var p = _a[_i];\n      p.draw(delta);\n    }\n  };\n\n  Particles.prototype.clear = function () {\n    this.array = [];\n  };\n\n  Particles.prototype.push = function (nb, mousePosition) {\n    var _a;\n\n    var container = this.container;\n    var options = container.options;\n    var limit = options.particles.number.limit * container.density;\n    this.pushing = true;\n\n    if (limit > 0) {\n      var countToRemove = this.count + nb - limit;\n\n      if (countToRemove > 0) {\n        this.removeQuantity(countToRemove);\n      }\n    }\n\n    var pos;\n\n    if (mousePosition) {\n      pos = (_a = mousePosition.position) !== null && _a !== void 0 ? _a : {\n        x: 0,\n        y: 0\n      };\n    }\n\n    for (var i = 0; i < nb; i++) {\n      this.addParticle(new Particle_1.Particle(container, pos));\n    }\n\n    if (!options.particles.move.enable) {\n      this.container.play();\n    }\n\n    this.pushing = false;\n  };\n\n  Particles.prototype.addParticle = function (particle) {\n    this.array.push(particle);\n  };\n\n  Particles.prototype.removeQuantity = function (quantity) {\n    var container = this.container;\n    var options = container.options;\n    this.removeAt(0, quantity);\n\n    if (!options.particles.move.enable) {\n      this.container.play();\n    }\n  };\n\n  return Particles;\n}();\n\nexports.Particles = Particles;","map":{"version":3,"sources":["/Users/samarthgoel/Desktop/web-dev-website/node_modules/tsparticles/dist/Core/Particles.js"],"names":["Object","defineProperty","exports","value","Particle_1","require","InteractionManager_1","Utils_1","HoverMode_1","Grabber_1","ClickMode_1","Repulser_1","DivMode_1","Bubbler_1","Connector_1","QuadTree_1","DestroyType_1","Point_1","Rectangle_1","Particles","container","array","interactionsEnabled","canvasSize","canvas","size","noiseZ","quadTree","QuadTree","Rectangle","width","height","prototype","get","length","enumerable","configurable","init","options","handled","id","plugins","plugin","particlesInitialization","undefined","i","count","particles","number","addParticle","Particle","lineLinked","enable","move","attract","collisions","infection","infections","notInfected","filter","p","infectionStage","infected","Utils","itemFromArray","startInfection","redraw","clear","draw","removeAt","index","quantity","_i","_a","splice","particle","destroy","remove","indexOf","update","delta","particlesToDelete","Bubbler","reset","destroyed","particleUpdate","sizeOpt","particlesOptions","sizeAnim","animation","DestroyType","max","retina","pixelRatio","min","minimumValue","push","pos","getPosition","insert","Point","x","y","particlesToDelete_1","interactivity","events","onDiv","onHover","mouse","position","onClick","clickPosition","hoverMode","mode","clickMode","divMode","isInArray","HoverMode","grab","Grabber","repulse","ClickMode","DivMode","Repulser","bubble","connect","Connector","_b","InteractionManager","interact","drawPlugin","nb","mousePosition","limit","density","pushing","countToRemove","removeQuantity","play"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Particle_1 = require(\"./Particle\");\nvar InteractionManager_1 = require(\"./Particle/Interactions/Particles/InteractionManager\");\nvar Utils_1 = require(\"../Utils/Utils\");\nvar HoverMode_1 = require(\"../Enums/Modes/HoverMode\");\nvar Grabber_1 = require(\"./Particle/Interactions/Mouse/Grabber\");\nvar ClickMode_1 = require(\"../Enums/Modes/ClickMode\");\nvar Repulser_1 = require(\"./Particle/Interactions/Mouse/Repulser\");\nvar DivMode_1 = require(\"../Enums/Modes/DivMode\");\nvar Bubbler_1 = require(\"./Particle/Interactions/Mouse/Bubbler\");\nvar Connector_1 = require(\"./Particle/Interactions/Mouse/Connector\");\nvar QuadTree_1 = require(\"../Utils/QuadTree\");\nvar DestroyType_1 = require(\"../Enums/DestroyType\");\nvar Point_1 = require(\"../Utils/Point\");\nvar Rectangle_1 = require(\"../Utils/Rectangle\");\nvar Particles = (function () {\n    function Particles(container) {\n        this.container = container;\n        this.array = [];\n        this.interactionsEnabled = false;\n        var canvasSize = this.container.canvas.size;\n        this.noiseZ = 0;\n        this.quadTree = new QuadTree_1.QuadTree(new Rectangle_1.Rectangle(0, 0, canvasSize.width, canvasSize.height), 4);\n    }\n    Object.defineProperty(Particles.prototype, \"count\", {\n        get: function () {\n            return this.array.length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Particles.prototype.init = function () {\n        var container = this.container;\n        var options = container.options;\n        var handled = false;\n        this.noiseZ = 0;\n        for (var id in container.plugins) {\n            var plugin = container.plugins[id];\n            if (plugin.particlesInitialization !== undefined) {\n                handled = plugin.particlesInitialization();\n            }\n            if (handled) {\n                break;\n            }\n        }\n        if (!handled) {\n            for (var i = this.count; i < options.particles.number.value; i++) {\n                this.addParticle(new Particle_1.Particle(container));\n            }\n        }\n        this.interactionsEnabled = options.particles.lineLinked.enable ||\n            options.particles.move.attract.enable ||\n            options.particles.collisions.enable ||\n            options.infection.enable;\n        if (options.infection.enable) {\n            for (var i = 0; i < options.infection.infections; i++) {\n                var notInfected = this.array.filter(function (p) { return p.infectionStage === undefined; });\n                var infected = Utils_1.Utils.itemFromArray(notInfected);\n                infected.startInfection(0);\n            }\n        }\n    };\n    Particles.prototype.redraw = function () {\n        this.clear();\n        this.init();\n        this.draw(0);\n    };\n    Particles.prototype.removeAt = function (index, quantity) {\n        if (index >= 0 && index <= this.count) {\n            for (var _i = 0, _a = this.array.splice(index, quantity !== null && quantity !== void 0 ? quantity : 1); _i < _a.length; _i++) {\n                var particle = _a[_i];\n                particle.destroy();\n            }\n        }\n    };\n    Particles.prototype.remove = function (particle) {\n        this.removeAt(this.array.indexOf(particle));\n    };\n    Particles.prototype.update = function (delta) {\n        var container = this.container;\n        var options = container.options;\n        var particlesToDelete = [];\n        for (var i = 0; i < this.count; i++) {\n            var particle = this.array[i];\n            Bubbler_1.Bubbler.reset(particle);\n            for (var id in container.plugins) {\n                var plugin = container.plugins[id];\n                if (particle.destroyed) {\n                    break;\n                }\n                if (plugin.particleUpdate) {\n                    plugin.particleUpdate(particle, delta);\n                }\n            }\n            if (!particle.destroyed) {\n                var sizeOpt = particle.particlesOptions.size;\n                var sizeAnim = sizeOpt.animation;\n                if (sizeAnim.enable) {\n                    switch (sizeAnim.destroy) {\n                        case DestroyType_1.DestroyType.max:\n                            if (particle.size.value >= sizeOpt.value * container.retina.pixelRatio) {\n                                particle.destroyed = true;\n                            }\n                            break;\n                        case DestroyType_1.DestroyType.min:\n                            if (particle.size.value <= sizeAnim.minimumValue * container.retina.pixelRatio) {\n                                particle.destroyed = true;\n                            }\n                            break;\n                    }\n                }\n            }\n            if (particle.destroyed) {\n                particlesToDelete.push(particle);\n                continue;\n            }\n            particle.update(i, delta);\n            var pos = particle.getPosition();\n            container.particles.quadTree.insert(new Point_1.Point(pos.x, pos.y, particle));\n        }\n        for (var _i = 0, particlesToDelete_1 = particlesToDelete; _i < particlesToDelete_1.length; _i++) {\n            var particle = particlesToDelete_1[_i];\n            this.remove(particle);\n        }\n        if (container.options.interactivity.events.onDiv.enable ||\n            (container.options.interactivity.events.onHover.enable && container.interactivity.mouse.position) ||\n            (container.options.interactivity.events.onClick.enable && container.interactivity.mouse.clickPosition)) {\n            var hoverMode = options.interactivity.events.onHover.mode;\n            var clickMode = options.interactivity.events.onClick.mode;\n            var divMode = options.interactivity.events.onDiv.mode;\n            if (Utils_1.Utils.isInArray(HoverMode_1.HoverMode.grab, hoverMode)) {\n                Grabber_1.Grabber.grab(container, delta);\n            }\n            if (Utils_1.Utils.isInArray(HoverMode_1.HoverMode.repulse, hoverMode) ||\n                Utils_1.Utils.isInArray(ClickMode_1.ClickMode.repulse, clickMode) ||\n                Utils_1.Utils.isInArray(DivMode_1.DivMode.repulse, divMode)) {\n                Repulser_1.Repulser.repulse(container, delta);\n            }\n            if (Utils_1.Utils.isInArray(HoverMode_1.HoverMode.bubble, hoverMode) || Utils_1.Utils.isInArray(ClickMode_1.ClickMode.bubble, clickMode)) {\n                Bubbler_1.Bubbler.bubble(container, delta);\n            }\n            if (Utils_1.Utils.isInArray(HoverMode_1.HoverMode.connect, hoverMode)) {\n                Connector_1.Connector.connect(container, delta);\n            }\n        }\n        for (var _a = 0, _b = this.array; _a < _b.length; _a++) {\n            var particle = _b[_a];\n            if (this.interactionsEnabled) {\n                InteractionManager_1.InteractionManager.interact(particle, container, delta);\n            }\n        }\n    };\n    Particles.prototype.draw = function (delta) {\n        var container = this.container;\n        container.canvas.clear();\n        var canvasSize = this.container.canvas.size;\n        this.quadTree = new QuadTree_1.QuadTree(new Rectangle_1.Rectangle(0, 0, canvasSize.width, canvasSize.height), 4);\n        this.update(delta);\n        this.noiseZ += 0.0004;\n        for (var id in container.plugins) {\n            var plugin = container.plugins[id];\n            container.canvas.drawPlugin(plugin, delta);\n        }\n        for (var _i = 0, _a = this.array; _i < _a.length; _i++) {\n            var p = _a[_i];\n            p.draw(delta);\n        }\n    };\n    Particles.prototype.clear = function () {\n        this.array = [];\n    };\n    Particles.prototype.push = function (nb, mousePosition) {\n        var _a;\n        var container = this.container;\n        var options = container.options;\n        var limit = options.particles.number.limit * container.density;\n        this.pushing = true;\n        if (limit > 0) {\n            var countToRemove = this.count + nb - limit;\n            if (countToRemove > 0) {\n                this.removeQuantity(countToRemove);\n            }\n        }\n        var pos;\n        if (mousePosition) {\n            pos = (_a = mousePosition.position) !== null && _a !== void 0 ? _a : { x: 0, y: 0 };\n        }\n        for (var i = 0; i < nb; i++) {\n            this.addParticle(new Particle_1.Particle(container, pos));\n        }\n        if (!options.particles.move.enable) {\n            this.container.play();\n        }\n        this.pushing = false;\n    };\n    Particles.prototype.addParticle = function (particle) {\n        this.array.push(particle);\n    };\n    Particles.prototype.removeQuantity = function (quantity) {\n        var container = this.container;\n        var options = container.options;\n        this.removeAt(0, quantity);\n        if (!options.particles.move.enable) {\n            this.container.play();\n        }\n    };\n    return Particles;\n}());\nexports.Particles = Particles;\n"]},"metadata":{},"sourceType":"script"}